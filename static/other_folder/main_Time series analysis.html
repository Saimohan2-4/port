<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Include Highlight.js library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
    <!-- Initialize Highlight.js -->
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });
    </script>
    <style>
        pre code {
            display: block;
            padding: 1em;
            overflow-x: auto;
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            width: 100%;
        }

        .hljs-comment {
            color: darkgreen;
        }

        .code h1 {
            font-size: 25px;
            margin: auto;
            color: rgb(68, 52, 67);
        }

        @media screen and (max-width: 1030px) {
            pre code {
                font-size: 13px;
            }
        }

        @media screen and (max-width: 950px) {
            pre code {
                font-size: 12px;
            }
        }

        @media screen and (max-width: 780px) {
            pre code {
                font-size: 11px;
            }
        }

        @media screen and (max-width: 450px) {
            pre code {
                font-size: 10px;
            }
        }
    </style>
    <title>Saimohan's Graph </title>
</head>

<body>
    <div class="flex p-14 justify-center items-center flex-col">
        <div class="flex flex-col justify-center items-center space-y-6">
            <h1 class="text-4xl font-semibold text-gray-800 ">Time Series Analysis</h1>
            <p class="w-[80%] justify-content text-gray-700">
                Time Series Analysis involves a comprehensive examination of sales patterns and trends over a specific
                period. Utilizing a line chart, the order date is represented on the x-axis, while the y-axis reflects
                sales data. This visualization enables a detailed exploration of fluctuations, allowing for the
                identification of recurring patterns, seasonal variations, and overall trends within the dataset. The
                analysis offers insights into the temporal dynamics of sales, aiding in strategic decision-making. By
                observing the graphical representation of sales over time, businesses can make informed adjustments to
                marketing strategies, inventory management, and other operational aspects. This analytical approach
                provides a valuable framework for understanding the temporal evolution of sales data and facilitates
                proactive responses to changing market conditions.
            </p>
            <ul class="pl-12 list-disc text-gray-700">
                <li> From the below bar chart you can compare and identify trends/patterns over time.</li>
                <li>To filter the graph based on the year, click on the buttons on the left side.</li>
            </ul>
            <div class="w-full flex justify-center items-center">
                <iframe class="w-[80%] border p-4 h-[90vh]" src="subfolder/Time series analysis.html"></iframe>
            </div>
            <div class="flex w-full justify-center items-center px-4 text-sm ">
                <div style="font-size: large;" class="code "><h1>Code</h1>
                    <span class="-ml-14">
                        <!-- Python code block with comments -->
                        <pre>
                            <code>
    #import necessary libraries
    import pandas as pd
    import plotly.graph_objects as go
    
    # reading the csv file
    df2 = pd.read_csv('Main Port/Retail sales analysis.csv')
    
    # assigning that csv file variable to the pandas dataframe, we can do df= pd.DataFrame(Filepath.csv) also.
    df = pd.DataFrame(df2)
    
    # Convert 'Sales' column to float
    sales = list(df['Sales'].astype(float))
    
    # Convert 'Order Date' column to datetime, to access year, the column needs to be changed to datetime format.
    df['Order Date'] = pd.to_datetime(df['Order Date'])
    
    # Extract Year,Month from 'Order Date'
    df['Year'] = df['Order Date'].dt.year
    df['Month'] = df['Order Date'].dt.month_name()
    
    # Calculate the sum of sales for each year
    sales_sum_per_year = df.groupby('Year')['Sales'].sum().reset_index()
    
    # Calculate the sum of sales for each year and month
    sales_sum_per_month = df.groupby(['Year', 'Month'])['Sales'].sum().reset_index()
    
    # variable called year as a list
    years = list(sales_sum_per_year['Year'])
    
    # list for sales per year
    sales_per_year = list(sales_sum_per_year['Sales'])
    
    # Create a dictionary to store monthly sales for each year
    monthly_sales_dict = {
        year: list(sales_sum_per_month.loc[sales_sum_per_month['Year'] == year, 'Sales'])
        for year in years
    }
    
    # Define the order of months, if data is in order, skip this part
    month_order = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    
    # Create a bar chart using Plotly Graph Objects (go)
    fig = go.Figure(data=[go.Bar(x=years, y=sales_per_year)])
    fig.update_layout(title=dict(text="Yearly Sales Analysis", font=dict(size=30, color="mediumpurple")))
    fig.update_layout(
        updatemenus=[
            dict(
                buttons=[dict(
                    label="(All)",
                    method="update",
                    args=[{
                        "y": [sales_per_year],
                        "x": [years],
                        "title": "Yearly Sales",
                        "xaxis_title": "Year",
                        "yaxis_title": "Total Sales"
                    }],
                ),
                *[
                    dict(
                        args=[{
                            "y": [monthly_sales_dict[i]],
                            "x": [sales_sum_per_month.loc[sales_sum_per_month['Year'] == i, 'Month']],
                            "title": f"Monthly Sales for {i}",
                            "xaxis_title": "Month",
                            "yaxis_title": "Sales"
                        }],
                        label=str(i),
                        method="update"
                    ) for i in years
                ]
            ],
            direction="down"
        )]
    )
    
    # Set the order of months for x-axis
    fig.update_xaxes(categoryorder="array", categoryarray=month_order)
    # Display the plot
    fig.write_html("Time series analysis.html")
    fig.show()
                            </code>
                        </pre>
                    </span>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
